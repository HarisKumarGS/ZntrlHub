<div>
    <table class="table-width-full" mat-table [dataSource]="results|async">
        <ng-container matColumnDef="customer">
            <th mat-header-cell *matHeaderCellDef>Customer Name</th>
            <td mat-cell *matCellDef="let element"> {{element.customerdetails.cust_name}} </td>
        </ng-container>
        <ng-container matColumnDef="whatsappNumber">
            <th mat-header-cell *matHeaderCellDef>Whatsapp Number</th>
            <td mat-cell *matCellDef="let element">{{element.customerdetails.wa_number}}</td>
        </ng-container>
        <ng-container matColumnDef="pageTitle">
            <th mat-header-cell *matHeaderCellDef>Page Title</th>
            <td mat-cell *matCellDef="let element"> {{element.page_name}} </td>
        </ng-container>
        <ng-container matColumnDef="pageUrl">
            <th mat-header-cell *matHeaderCellDef>URL</th>
            <td mat-cell *matCellDef="let element"> <a [href]="element.page_url">{{element.page_url}}</a> </td>
        </ng-container>
        <ng-container matColumnDef="timeStayed">
            <th mat-header-cell *matHeaderCellDef>Time Stayed</th>
            <td mat-cell *matCellDef="let element"> {{element.total_time_stayed ? stringToNumber(element.total_time_stayed) : '-'}} </td>
        </ng-container>
        <ng-container matColumnDef="buttonClick">
            <th mat-header-cell *matHeaderCellDef>Button Click</th>
            <td mat-cell *matCellDef="let element"> {{getButtonClicked(element)}} </td>
        </ng-container>
        <ng-container matColumnDef="location">
            <th mat-header-cell *matHeaderCellDef>Location</th>
            <td mat-cell *matCellDef="let element"> {{element.location}} </td>
        </ng-container>
        <ng-container matColumnDef="timezone">
            <th mat-header-cell *matHeaderCellDef>Timezone</th>
            <td mat-cell *matCellDef="let element"> {{element.timezone}} </td>
        </ng-container>
        <ng-container matColumnDef="device_type">
            <th mat-header-cell *matHeaderCellDef>Device</th>
            <td mat-cell *matCellDef="let element"> {{element.device_type}} </td>
        </ng-container>
        <ng-container matColumnDef="browser_name">
            <th mat-header-cell *matHeaderCellDef>Browser</th>
            <td mat-cell *matCellDef="let element"> {{element.browser_name}} </td>
        </ng-container>
        <ng-container matColumnDef="dateTime">
            <th mat-header-cell *matHeaderCellDef>Date</th>
            <td mat-cell *matCellDef="let element"> {{formatDateCreated(element.date_created)}} </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
    <mat-paginator 
        [length]="totalCount|async"
        [pageSize]="pageSize"
        (page)="onPageChange($event)"
        [pageIndex]="currentPage|async"
        aria-label="Select page">
    </mat-paginator>
</div>